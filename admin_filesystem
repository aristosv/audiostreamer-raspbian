expand_filesystem ()
{
#!/bin/bash

# add entry to /etc/rc.local
sudo sed -i '$i/usr/local/bin/startup' /etc/rc.local

# create script
sudo bash -c 'cat > /usr/local/bin/startup' << 'EOL'

# expand filesystem
sudo raspi-config --expand-rootfs

# delete entry in /etc/rc.local
sudo sed -i '/startup/d' /etc/rc.local

# delete script
sudo rm /usr/local/bin/startup

# reboot
sudo reboot

EOL

# make script executable
sudo chmod +x /usr/local/bin/startup
}

echo expand filesystem ; expand_filesystem
